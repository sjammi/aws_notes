## ELB (Elastic Load Balancer)
- see "Load Balancing" in [general/terms](general.md)
- AWS managed
- More expensive but setup hard

---

## Types
- internal or external
- Classic
  - old gen
  - TCP (layer 4) + HTTP, HTTPS (layer 7)
  - One cert max
- Application
  - Layer 7 (HTTP)
  - above \+ websocket
  - supports redirects
  - route based on path, hostname, or headers/query
  - microservices, EC2, lambda, IPs
  - Client IP hidden
  - Multiple certs with SNI
- Network
  - Layer 4 (Network)
  - TCP \+ UDP
  - Very low latency
  - One static IP per AZ
  - EC2, IPs, an ALB
  - Multiple certs with SNI
- Gateway
  - Layer 3 (Network, IP Packets)
  - Both a singular in/out gateway, and load balancer
  - EC2 and IPs

---

## Sticky Sessions
- "Stickiness" - same client always redirected to same instance
- CLB and ALB
- uses cookie with expiration
  - application based: custom by user or application by LB
  - duration based: generated by LB
- more secure session data, but may cause imbalanced load

---

## Cross Zone LB
- With: always even distribution across all AZs
- Without: even distribution within each AZ, maybe different amongst other AZs
- ALB: on by default
- NLB + GLB: off by default, pay to enable
- CLB: off by default, free

---

## SSL/TLS
- ## TLS is more used now, but still referred to as SSL
- SSL: Secure Sockets Layer
- TLS: V2. Transport Layer Security
- SSL cert allows encrypted traffic from client to load balancer
- LBs use X.509 certs
  - manage in ACM (AWS Certificate Manager)
  - use SNI to request specific hostname
- SNI (Server Name Indication)
  - solves multiple SSL certs on 1 server
  - use SNI to pick needed cert
  - ## ALB, NLB, Cloudfront only
  

---

## Connection Draining
  - ## Also called Deregistration Delay
  - ## Short requests -> low value
  - Time to handle in-flight requests during [given shutdown]
  - 1-3600, default 300 seconds, or disable


